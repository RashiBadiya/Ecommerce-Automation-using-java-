<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test E-commerce Site</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <!-- The main application container -->
    <div id="app" class="bg-white rounded-xl shadow-2xl p-8 max-w-lg w-full relative">
        <!-- Display Login Credentials -->
        <div class="absolute top-4 right-4 bg-yellow-100 border-2 border-yellow-400 text-yellow-800 p-2 rounded-lg text-xs font-mono">
            <p>Username: **testuser**</p>
            <p>Password: **password123**</p>
        </div>

        <!-- Dynamic content will be loaded here -->
    </div>

    <script>
        // Data for the application
        const PRODUCTS = [
            { id: 1, name: "Stylish Jacket", price: 75.99, image: "https://placehold.co/600x400/FF5733/FFFFFF?text=Jacket" },
            { id: 2, name: "Denim Jeans", price: 45.50, image: "https://placehold.co/600x400/33C1FF/FFFFFF?text=Jeans" },
            { id: 3, name: "Running Shoes", price: 99.00, image: "https://placehold.co/600x400/8A33FF/FFFFFF?text=Shoes" },
            { id: 4, name: "Casual T-Shirt", price: 25.00, image: "https://placehold.co/600x400/33FF96/FFFFFF?text=T-Shirt" },
            { id: 5, name: "Leather Wallet", price: 30.25, image: "https://placehold.co/600x400/FF33E0/FFFFFF?text=Wallet" }
        ];

        let isLoggedIn = false;
        let cart = [];
        let view = 'login';
        let sortOrder = 'none';

        const app = document.getElementById('app');

        // Function to render the current view
        function render() {
            app.innerHTML = ''; // Clear the current view
            switch (view) {
                case 'login':
                    renderLoginPage();
                    break;
                case 'products':
                    renderProductsPage();
                    break;
                case 'cart':
                    renderCartPage();
                    break;
                case 'checkout':
                    renderCheckoutPage();
                    break;
                default:
                    renderLoginPage();
            }
        }

        // --- Render Functions ---

        function renderLoginPage() {
            app.innerHTML = `
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Login</h2>
                <form id="loginForm" class="space-y-4">
                    <input type="text" id="username" placeholder="Username" class="login-field w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200">
                    <input type="password" id="password" placeholder="Password" class="login-field w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200">
                    <button type="submit" id="loginBtn" class="w-full bg-blue-600 text-white font-semibold py-3 rounded-lg hover:bg-blue-700 transition duration-300">Login</button>
                    <p id="loginMessage" class="text-red-500 text-sm mt-2"></p>
                </form>
            `;
            // Add event listener for login form submission
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
        }

        function renderProductsPage() {
            const sortedProducts = sortProducts(PRODUCTS);
            const productListHTML = sortedProducts.map(product => `
                <div class="product-item bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col items-center text-center">
                    <img src="${product.image}" alt="${product.name}" class="w-full rounded-md mb-4 aspect-video object-cover">
                    <h3 class="product-name text-lg font-semibold text-gray-800">${product.name}</h3>
                    <p class="product-price text-gray-600 mt-1">$${product.price.toFixed(2)}</p>
                    <button class="add-to-cart-btn mt-4 w-full bg-green-500 text-white py-2 rounded-lg font-medium hover:bg-green-600 transition duration-300" data-id="${product.id}">Add to Cart</button>
                </div>
            `).join('');

            const cartItemCount = cart.reduce((count, item) => count + item.quantity, 0);

            app.innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Products</h2>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <select id="priceFilter" class="filter-select block appearance-none bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-gray-500">
                                <option value="none" ${sortOrder === 'none' ? 'selected' : ''}>Sort by Price</option>
                                <option value="asc" ${sortOrder === 'asc' ? 'selected' : ''}>Low to High</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15 10l-5-5-.707.707L13.586 9H4v2h9.586z"/></svg>
                            </div>
                        </div>
                        <button id="cartBtn" class="cart-button relative bg-yellow-400 p-2 rounded-full hover:bg-yellow-500 transition duration-300">
                            <svg class="w-6 h-6 text-gray-800" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.438a.998.998 0 00.418.596l1.373.834a3.003 3.003 0 003.546 1.156 3.001 3.001 0 002.37-1.157l1.373-.834a.998.998 0 00.418-.596l1.358-5.438a.997.997 0 00.01-.042L17.78 3H19a1 1 0 000-2h-2V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2h-1V1a1 1 0 100 2H3zM9 13a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1zm-3-1a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1zm6 0a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1zm3-1a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="cart-item-count absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">${cartItemCount}</span>
                        </button>
                        <button id="logoutBtn" class="logout-button bg-red-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-600 transition duration-300">Logout</button>
                    </div>
                </div>
                <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    ${productListHTML}
                </div>
            `;
            // Add event listeners
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', handleAddToCart);
            });
            document.getElementById('cartBtn').addEventListener('click', () => {
                view = 'cart';
                render();
            });
            document.getElementById('logoutBtn').addEventListener('click', () => {
                isLoggedIn = false;
                view = 'login';
                cart = [];
                render();
            });
            document.getElementById('priceFilter').addEventListener('change', (e) => {
                sortOrder = e.target.value;
                render();
            });
        }

        function renderCartPage() {
            const cartItemsHTML = cart.length > 0 ? cart.map(item => `
                <div class="cart-item flex items-center justify-between p-4 border-b border-gray-200">
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 rounded-md">
                    <div class="flex-grow ml-4">
                        <h3 class="item-name text-lg font-semibold text-gray-800">${item.name}</h3>
                        <p class="text-gray-600">Price: $${item.price.toFixed(2)}</p>
                        <p class="text-gray-600">Quantity: ${item.quantity}</p>
                    </div>
                    <p class="item-total-price text-gray-800 font-bold">$${(item.price * item.quantity).toFixed(2)}</p>
                </div>
            `).join('') : '<p class="text-gray-500 text-center">Your cart is empty.</p>';

            const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

            app.innerHTML = `
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Shopping Cart</h2>
                <div class="cart-list space-y-4">
                    ${cartItemsHTML}
                </div>
                <div class="mt-6 p-4 border-t-2 border-gray-200 flex justify-between items-center">
                    <p class="text-lg font-bold text-gray-800">Total: <span id="cartTotal">$${total.toFixed(2)}</span></p>
                    <button id="checkoutBtn" class="checkout-button bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300" ${cart.length === 0 ? 'disabled' : ''}>Proceed to Checkout</button>
                </div>
                <button id="backToProductsBtn" class="mt-4 text-sm text-blue-500 hover:underline">← Continue Shopping</button>
            `;
            document.getElementById('checkoutBtn').addEventListener('click', () => {
                view = 'checkout';
                render();
            });
            document.getElementById('backToProductsBtn').addEventListener('click', () => {
                view = 'products';
                render();
            });
        }

        function renderCheckoutPage() {
            const cartTotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

            app.innerHTML = `
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Checkout</h2>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold mb-4">Order Summary</h3>
                    <p class="flex justify-between font-medium">Subtotal: <span>$${cartTotal.toFixed(2)}</span></p>
                    <p class="flex justify-between font-medium">Shipping: <span>$5.00</span></p>
                    <div class="h-px bg-gray-300 my-2"></div>
                    <p class="flex justify-between text-xl font-bold">Total: <span>$${(cartTotal + 5).toFixed(2)}</span></p>
                </div>
                <p class="mt-6 text-green-600 font-bold text-center text-xl" id="checkoutSuccessMessage">Checkout Successful! Thank you for your order.</p>
                <div class="mt-8 text-center">
                    <button id="backToProductsFromCheckoutBtn" class="bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-600 transition duration-300">Back to Products</button>
                </div>
            `;
            document.getElementById('backToProductsFromCheckoutBtn').addEventListener('click', () => {
                view = 'products';
                cart = [];
                render();
            });
        }

        // --- Event Handlers ---

        function handleLogin(event) {
            event.preventDefault();
            const usernameInput = document.getElementById('username').value;
            const passwordInput = document.getElementById('password').value;
            const loginMessage = document.getElementById('loginMessage');

            if (usernameInput === 'testuser' && passwordInput === 'password123') {
                isLoggedIn = true;
                view = 'products';
                render();
            } else {
                loginMessage.textContent = 'Invalid username or password.';
            }
        }

        function handleAddToCart(event) {
            const productId = parseInt(event.target.dataset.id);
            const product = PRODUCTS.find(p => p.id === productId);

            const existingCartItem = cart.find(item => item.id === productId);

            if (existingCartItem) {
                existingCartItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            // Simple visual feedback for the user
            event.target.textContent = 'Added!';
            event.target.disabled = true;
            setTimeout(() => {
                event.target.textContent = 'Add to Cart';
                event.target.disabled = false;
                document.querySelector('.cart-item-count').textContent = cart.reduce((count, item) => count + item.quantity, 0);
            }, 1000);
        }

        function sortProducts(products) {
            if (sortOrder === 'asc') {
                return [...products].sort((a, b) => a.price - b.price);
            }
            return products;
        }

        // Initial render
        document.addEventListener('DOMContentLoaded', render);
    </script>
</body>
</html>
